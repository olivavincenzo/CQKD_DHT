
services:
  worker-1:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-1
    container_name: cqkd_dht-worker-1
    environment:
      - DHT_PORT=7000
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7000:7000/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-2:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-2
    container_name: cqkd_dht-worker-2
    environment:
      - DHT_PORT=7001
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7001:7001/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-3:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-3
    container_name: cqkd_dht-worker-3
    environment:
      - DHT_PORT=7002
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7002:7002/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-4:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-4
    container_name: cqkd_dht-worker-4
    environment:
      - DHT_PORT=7003
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7003:7003/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-5:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-5
    container_name: cqkd_dht-worker-5
    environment:
      - DHT_PORT=7004
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7004:7004/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-6:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-6
    container_name: cqkd_dht-worker-6
    environment:
      - DHT_PORT=7005
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7005:7005/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-7:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-7
    container_name: cqkd_dht-worker-7
    environment:
      - DHT_PORT=7006
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7006:7006/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-8:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-8
    container_name: cqkd_dht-worker-8
    environment:
      - DHT_PORT=7007
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7007:7007/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-9:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-9
    container_name: cqkd_dht-worker-9
    environment:
      - DHT_PORT=7008
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7008:7008/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-10:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-10
    container_name: cqkd_dht-worker-10
    environment:
      - DHT_PORT=7009
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7009:7009/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-11:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-11
    container_name: cqkd_dht-worker-11
    environment:
      - DHT_PORT=7010
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7010:7010/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-12:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-12
    container_name: cqkd_dht-worker-12
    environment:
      - DHT_PORT=7011
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7011:7011/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-13:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-13
    container_name: cqkd_dht-worker-13
    environment:
      - DHT_PORT=7012
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7012:7012/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-14:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-14
    container_name: cqkd_dht-worker-14
    environment:
      - DHT_PORT=7013
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7013:7013/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-15:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-15
    container_name: cqkd_dht-worker-15
    environment:
      - DHT_PORT=7014
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7014:7014/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-16:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-16
    container_name: cqkd_dht-worker-16
    environment:
      - DHT_PORT=7015
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7015:7015/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-17:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-17
    container_name: cqkd_dht-worker-17
    environment:
      - DHT_PORT=7016
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7016:7016/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-18:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-18
    container_name: cqkd_dht-worker-18
    environment:
      - DHT_PORT=7017
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7017:7017/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-19:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-19
    container_name: cqkd_dht-worker-19
    environment:
      - DHT_PORT=7018
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7018:7018/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-20:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-20
    container_name: cqkd_dht-worker-20
    environment:
      - DHT_PORT=7019
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7019:7019/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-21:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-21
    container_name: cqkd_dht-worker-21
    environment:
      - DHT_PORT=7020
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7020:7020/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-22:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-22
    container_name: cqkd_dht-worker-22
    environment:
      - DHT_PORT=7021
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7021:7021/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-23:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-23
    container_name: cqkd_dht-worker-23
    environment:
      - DHT_PORT=7022
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7022:7022/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-24:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-24
    container_name: cqkd_dht-worker-24
    environment:
      - DHT_PORT=7023
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7023:7023/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-25:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-25
    container_name: cqkd_dht-worker-25
    environment:
      - DHT_PORT=7024
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7024:7024/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-26:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-26
    container_name: cqkd_dht-worker-26
    environment:
      - DHT_PORT=7025
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7025:7025/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-27:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-27
    container_name: cqkd_dht-worker-27
    environment:
      - DHT_PORT=7026
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7026:7026/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-28:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-28
    container_name: cqkd_dht-worker-28
    environment:
      - DHT_PORT=7027
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7027:7027/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-29:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-29
    container_name: cqkd_dht-worker-29
    environment:
      - DHT_PORT=7028
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7028:7028/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M
  worker-30:
    build:
      context: .
      dockerfile: Dockerfile
    image: cqkd-dht-node:worker-30
    container_name: cqkd_dht-worker-30
    environment:
      - DHT_PORT=7029
      - BOOTSTRAP_NODES=bootstrap-primary:5678,bootstrap-secondary:5679
    ports:
      - "7029:7029/udp"
    depends_on:
      bootstrap-primary:
        condition: service_healthy
      bootstrap-secondary:
        condition: service_healthy
    networks:
      - cqkd-network
    command: ["python", "-m", "scripts.worker_node"]
    restart: unless-stopped
    deploy:
      resources:
        limits:
          memory: 60M
        reservations:
          memory: 60M

networks:
  cqkd-network:
    external: true
    name: cqkd_dht_cqkd-network
